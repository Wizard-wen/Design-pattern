# 页面埋点

## 
###  PV

PV（Page View）访问量, 即页面浏览量或点击量，衡量网站用户访问的网页数量；
在一定统计周期内用户每打开或刷新一个页面就记录1次，多次打开或刷新同一页面则浏览量累计。
说白了就是统计一下某些页面在一段时间比如一天内被访问了多少次，哪怕是同一个用户访问多次也没关系，说不定这个用户就是特别钟爱这个页面呢？所以重复访问是计算为有效的。

### UV

UV（Unique Visitor）独立访客，统计1天内访问某站点的用户数(以cookie为依据);
访问网站的一台电脑客户端为一个访客。
可以理解成访问某网站的电脑的数量。
网站判断来访电脑的身份是通过来访电脑的cookies实现的。
如果更换了IP后但不清除cookies，再访问相同网站，该网站的统计中UV数是不变的。
如果用户不保存cookies访问、清除了cookies或者更换设备访问，计数会加1。00:00-24:00内相同的客户端多次访问只计为1个访客。
说白了就是根据用户登陆后所记录的cookie（来源可能是session或者token）来标识一个用户，以统计有多少用户访问应用。


### IP

IP（Internet Protocol）独立IP数，是指1天内多少个独立的IP浏览了页面，即统计不同的IP浏览用户数量。
同一IP不管访问了几个页面，独立IP数均为1；
不同的IP浏览页面，计数会加1。 
IP是基于用户广域网IP地址来区分不同的访问者的，所以，多个用户（多个局域网IP）在同一个路由器（同一个广域网IP）内上网，可能被记录为一个独立IP访问者。
如果用户不断更换IP，则有可能被多次统计。
说白了就是根据用户的IP来标识一个用户，以统计有多少用户访问应用。


## image Beacon

首先，利用Image Beacon是不会碰到跨域问题的，浏览器的安全级别限制不针对这个。

而且请求体的体积较小，请求速度较快，网络资源消耗较少。

既然如此，那为什么不选择其他类型文件的请求例如JS文件、CSS文件或者TTF字体类的文件呢？

是因为JS等类型的文件必须要插入到文档树中浏览器才会发送请求，很可能带来渲染的成本而且有可能会阻塞文档树的渲染；
但是图片请求则不然，构造图片打点不仅不用插入DOM，只要在js中new出Image对象就能发起请求；
而且，图片请求不存在阻塞问题，在没有js的浏览器环境中也能通过img标签正常打点；

这是其他类型的资源请求所做不到的。

说到这里，还有最后一个选择要做，就是应该使用什么格式的Img呢？

首先，1x1像素是最小的合法图片。
而且，因为是通过图片打点，所以图片最好是透明的，图片透明只要使用一个二进制位标记图片是透明色即可，不用存储色彩空间数据，可以节约体积。

那么BMP、PNG和GIF格式都支持透明格式，我们要选择哪种呢？
答案是GIF格式，据统计，最小的BMP文件需要74个字节，PNG需要67个字节，而合法的GIF，只需要43个字节，体积小请求成本当前就会较低。

最后总结一下为什么此类请求最佳方案是使用GIF格式的1 * 1尺寸透明图片呢？
- 能够完成整个 HTTP 请求+响应（尽管不需要响应内容）
- 触发 GET 请求之后不需要获取和处理数据、服务器也不需要发送数据
- 跨域友好
- 执行过程无阻塞
- 相比 XMLHttpRequest 对象发送 GET 请求，性能上更好
- GIF的最低合法体积最小（最小的BMP文件需要74个字节，PNG需要67个字节，而合法的GIF，只需要43个字节）

>作者：半盏屠苏
>链接：https://juejin.im/post/5d9075c6f265da5b7b3ed853
>来源：掘金
>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。



## Vue埋点解决方案 v-track

[v-track](https://lhammer.cn/v-track/#/)链接

``` sh
    # YARN
    $ yarn add v-track

    # NPM
    $ npm install v-track --save
```